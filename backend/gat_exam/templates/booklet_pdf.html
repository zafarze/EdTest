<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ exam.title }}</title>
    <style>
        /* --- 1. –ù–ê–°–¢–†–û–ô–ö–ò –°–¢–†–ê–ù–ò–¶–´ (A4) --- */
        @page {
            size: A4; /* 210mm x 297mm */
            margin: 10mm 15mm; /* –ü–æ–ª—è */
            
            /* –ù–∏–∂–Ω–∏–π –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª */
            @bottom-center {
                content: element(footer);
            }
        }

        body {
            font-family: "Times New Roman", Times, serif;
            font-size: 11px;
            line-height: 1.2;
            color: #000;
            margin: 0;
            padding: 0;
            /* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ª–∏–Ω–∏—è –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä PDF —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç) */
            /* background: linear-gradient(to right, transparent 50%, #000 50%, #000 calc(50% + 1px), transparent calc(50% + 1px)); */
            /* background-size: 100% 297mm; */
        }

        /* --- –£–¢–ò–õ–ò–¢–´ --- */
        .uppercase { text-transform: uppercase; }
        .font-bold { font-weight: bold; }
        .text-center { text-align: center; }
        .flex { display: flex; }
        
        /* --- –®–ê–ü–ö–ê --- */
        header {
            border-bottom: 2px double #000; /* –î–≤–æ–π–Ω–∞—è –ª–∏–Ω–∏—è –∫–∞–∫ –≤ –ø—Ä–µ–≤—å—é */
            padding-bottom: 5px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            width: 100%;
        }
        
        .header-item {
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
            line-height: 1;
        }
        .header-center {
            font-size: 18px;
        }

        /* --- 2. –ì–õ–ê–í–ù–´–ô –ö–û–ù–¢–ï–ô–ù–ï–† (–ö–û–õ–û–ù–ö–ò) --- */
        .content-columns {
            column-count: 2;
            column-gap: 10mm;
            column-rule: 1px solid #000; /* –õ–∏–Ω–∏—è –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏ */
            width: 100%;
            
            /* üî• –í–ê–ñ–ù–û: –ó–∞–ø–æ–ª–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (Left -> Right) */
            column-fill: auto; 
            
            text-align: left;
        }

        /* --- –°–ï–ö–¶–ò–ò (–ü–†–ï–î–ú–ï–¢–´) --- */
        .section-container {
            margin-bottom: 15px;
            /* üî• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –†–∞–∑—Ä–µ—à–∞–µ–º —Ä–∞–∑—Ä—ã–≤ —Å–µ–∫—Ü–∏–∏, —á—Ç–æ–±—ã –≤–æ–ø—Ä–æ—Å—ã –ø–µ—Ä–µ—Ç–µ–∫–∞–ª–∏ –≤ —Å–ª–µ–¥. –∫–æ–ª–æ–Ω–∫—É */
            break-inside: auto; 
        }

        .subject-title {
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            text-transform: uppercase;
            margin-bottom: 10px;
            margin-top: 5px;
            text-decoration: underline;
            text-decoration-style: double; /* –î–≤–æ–π–Ω–æ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ */
            text-underline-offset: 3px;
            
            /* üî• –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫ –ø–µ—Ä–≤–æ–º—É –≤–æ–ø—Ä–æ—Å—É (–Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–¥–Ω–∏–º –≤–Ω–∏–∑—É) */
            break-after: avoid; 
            page-break-after: avoid;
        }

        /* --- –í–û–ü–†–û–°–´ --- */
        .question-block {
            margin-bottom: 12px;
            /* –í–æ–ø—Ä–æ—Å —Ü–µ–ª–∏–∫–æ–º –Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä—ã–≤–∞—Ç—å—Å—è */
            break-inside: avoid; 
            page-break-inside: avoid;
            position: relative;
        }

        .q-text-row {
            display: flex;
            gap: 5px;
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        /* –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–±—Ç–µ–∫–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞ */
        .q-number { 
            float: left; 
            margin-right: 5px; 
            font-weight: bold;
        }
        .q-content { 
            display: block; 
            width: 100%; 
        }

        /* --- –í–ê–†–ò–ê–ù–¢–´ –û–¢–í–ï–¢–û–í --- */
        .choices-container {
            padding-left: 18px; /* –ß—É—Ç—å –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø */
        }

        .choice-row {
            display: flex;
            gap: 5px;
            margin-bottom: 2px;
            align-items: flex-start; 
        }
        
        .choice-letter { 
            font-weight: bold; 
            min-width: 18px; 
        }

        /* --- –§–£–¢–ï–† --- */
        .footer-element {
            position: running(footer);
            width: 100%;
            border-top: 1px solid #000;
            padding-top: 5px;
            margin-top: 10px;
            font-size: 10px;
            text-transform: uppercase;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }

        .variant-strip {
            letter-spacing: 1.5em;
            overflow: hidden;
            white-space: nowrap;
            color: #000;
            opacity: 0.7;
            padding: 0 20px;
        }

        /* --- –ö–ê–†–¢–ò–ù–ö–ò (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–∞–∫ –≤ React) --- */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 4px 0;
            border: 1px solid #eee;
            border-radius: 4px;
        }
        
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
        .q-image { max-height: 150px; object-fit: contain; }
        .opt-image { max-height: 80px; object-fit: contain; }

    </style>
</head>
<body>

    <div class="footer-element">
        <span style="color: #000;">ORIGINAL</span>
        
        <div class="variant-strip">
            {% for i in "xxxxxxxxxxxx" %}{{ variant|default:"A" }} {% endfor %}
        </div>

        <span style="color: #000;">Page <span class="page-number"></span></span>
    </div>

    <header>
        <div class="header-item">–°–ò–ù–§–ò {{ exam.grade_level }}</div>
        <div class="header-item header-center">–¢–ï–°–¢–ò –£–ú–£–ú–ò {{ exam.gat_round }}</div>
        <div class="header-item">{{ date|default:"2025-2026" }}</div>
    </header>

    <div class="content-columns">
        {% for section in sections %}
            <div class="section-container">
                <div class="subject-title">{{ section.subject }}</div>
                
                {% for q in section.questions %}
                    <div class="question-block">
                        <div class="q-text-row">
                            <span class="q-number">{{ forloop.counter }}.</span>
                            <div class="q-content">
                                <div>{{ q.text|safe }}</div>
                                
                                {% if q.image %}
                                    <img src="{{ q.image.url }}" class="q-image" />
                                {% endif %}
                            </div>
                        </div>

                        <div class="choices-container">
                            {% for choice in q.pdf_choices %}
                                <div class="choice-row">
                                    <span class="choice-letter">
                                        {% if forloop.counter == 1 %}A){% endif %}
                                        {% if forloop.counter == 2 %}B){% endif %}
                                        {% if forloop.counter == 3 %}C){% endif %}
                                        {% if forloop.counter == 4 %}D){% endif %}
                                        {% if forloop.counter == 5 %}E){% endif %}
                                        {% if forloop.counter == 6 %}F){% endif %}
                                    </span>
                                    
                                    <div style="display: flex; flex-direction: column;">
                                        <span class="choice-text">{{ choice.text }}</span>
                                        
                                        {% if choice.image %}
                                            <img src="{{ choice.image.url }}" class="opt-image" />
                                        {% endif %}
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>

</body>
</html>